!function(){"use strict";var e,t={n:function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,{a:s}),s},d:function(e,s){for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},s=window.wp.apiFetch,n=t.n(s),i=window.wp.components,o=window.wp.data,r=window.wp.element,a=window.ReactJSXRuntime,l=({endpoint:e,onChange:t,value:s=[],...l})=>{const[c,d]=(0,r.useState)(!1),{baseControlProps:p,controlProps:u}=(0,i.useBaseControlProps)(l),{setOptions:w}=(0,o.useDispatch)("site-reviews"),v=(0,o.useSelect)((t=>t("site-reviews").getOptions(e)),[e]),h=Object.fromEntries(Object.entries(u).filter((([e])=>!["label","checked","onChange","value"].includes(e))));return(0,r.useEffect)((()=>{v||(async()=>{d(!0);try{const t=new URL(e,window.location.origin),s=await n()({path:t.pathname+t.search});if(!Array.isArray(s)||0===s.length)throw new Error("Invalid or empty response from API");const i=s.map((e=>({label:e.title,value:e.id})));w(e,i)}catch(e){console.error("Error fetching options:",e)}finally{d(!1)}})()}),[e,v,w]),(0,a.jsxs)(i.BaseControl,{__nextHasNoMarginBottom:!0,...p,children:[c&&(0,a.jsx)(i.Spinner,{}),!c&&v&&v.map((e=>(0,a.jsx)(i.ToggleControl,{__nextHasNoMarginBottom:!0,label:e.label,checked:s.includes(e.value),onChange:n=>((e,n)=>{const i=n?[...s,e]:s.filter((t=>t!==e));t(i)})(e.value,n),...h},e.value)))]})},c=window.wp.serverSideRender,d=t.n(c),p=window.wp.i18n,u=window.wp.blockEditor,w=({className:e="ssr",inspectorAdvancedControls:t={},inspectorControls:s={},name:n,namespace:o="site-reviews",props:l,renderCallback:c})=>{const{attributes:w}=l,v=(0,r.useRef)(null),h=(0,r.useCallback)((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)if("DIV"===t.tagName&&t.classList.contains(e)){if("function"==typeof c){const e=t.firstElementChild;e.classList.add("glsr-"+window.getComputedStyle(e,null).getPropertyValue("direction")),c(t,v.current)}return}}),[c]);(0,r.useEffect)((()=>{if(!v.current)return;const e=new MutationObserver(h);return e.observe(v.current,{childList:!0,subtree:!0}),()=>e.disconnect()}),[h]);const f={panel_settings:(0,a.jsx)(i.PanelBody,{title:(0,p._x)("Settings","admin-text","site-reviews"),children:Object.values(wp.hooks.applyFilters(`${o}.${n}.InspectorControls`,s,l))})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.InspectorControls,{children:Object.values(wp.hooks.applyFilters(`${o}.${n}.InspectorPanels`,f,l))}),(0,a.jsx)(u.InspectorAdvancedControls,{children:Object.values(wp.hooks.applyFilters(`${o}.${n}.InspectorAdvancedControls`,t,l))}),(0,a.jsx)("div",{...(0,u.useBlockProps)({ref:v}),children:(0,a.jsx)(i.Disabled,{isDisabled:!0,children:(0,a.jsx)(d(),{attributes:w,block:`${o}/${n}`,className:e,skipBlockSupportAttributes:!0})})})]})},v=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"site-reviews/review","version":"2.0.0","title":"Single Review","description":"Display a single review.","category":"site-reviews","example":{},"textdomain":"site-reviews","attributes":{"className":{"default":"","type":"string"},"hide":{"default":[],"items":{"type":"string"},"type":"array"},"id":{"default":"","type":"string"},"post_id":{"default":"","type":"string"}},"editorScript":"file:./index.jsx","script":"site-reviews","keywords":["review","site reviews"],"supports":{"html":false}}'),h=window.wp.blocks,f=window.React;function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},x.apply(null,arguments)}const m=t=>f.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),e||(e=f.createElement("path",{d:"M18.646 1.821a3.44 3.44 0 0 1 1.772.481 3.57 3.57 0 0 1 1.281 1.285 3.46 3.46 0 0 1 .479 1.775v8.126a3.5 3.5 0 0 1-.477 1.78 3.55 3.55 0 0 1-1.283 1.298 3.44 3.44 0 0 1-1.772.481h-6.28l-.064.052-6.144 4.914c-.392.304-.976.263-1.359-.066a1.18 1.18 0 0 1-.337-1.233l1.377-3.742h-.485a3.44 3.44 0 0 1-1.567-.369l-.206-.112A3.57 3.57 0 0 1 2.3 15.206a3.46 3.46 0 0 1-.479-1.775V5.362A3.46 3.46 0 0 1 2.3 3.587a3.57 3.57 0 0 1 1.281-1.285 3.44 3.44 0 0 1 1.772-.481h13.292zm0 1.5H5.354a1.94 1.94 0 0 0-1.01.273 2.07 2.07 0 0 0-.749.752 1.96 1.96 0 0 0-.273 1.016v8.069a1.96 1.96 0 0 0 .273 1.016 2.07 2.07 0 0 0 .749.752 1.94 1.94 0 0 0 1.01.273H7.99l-.371 1.009-1.275 3.464.103-.082 1.871-1.496 1.1-.88 1.955-1.564.263-.21.205-.164h6.806a1.94 1.94 0 0 0 1.01-.273c.315-.186.561-.435.747-.757a2 2 0 0 0 .275-1.029V5.362a1.96 1.96 0 0 0-.273-1.016 2.07 2.07 0 0 0-.749-.752 1.94 1.94 0 0 0-1.01-.273zm-5.783 1.995v5.757c0 .087-.028.444-.038.592v.061l1.365-.042v1.17H9.81V11.81l.688-.013.407-.029c.084-.021.168-.042.232-.105s.105-.147.147-.274a1 1 0 0 0 .034-.136V7.578H9.81v-.754c.829-.226 1.507-.829 1.96-1.507h1.093z"}))),g={cachedOptions:{}},b={setOptions(e,t){return{type:"SET_OPTIONS",endpoint:e,options:t}}},y={getOptions(e,t){return e.cachedOptions[t]||null}};(0,o.select)("site-reviews")||(0,o.registerStore)("site-reviews",{actions:b,reducer:(e=g,t)=>"SET_OPTIONS"===t.type?{...e,cachedOptions:{...e.cachedOptions,[t.endpoint]:t.options}}:e,selectors:y}),(0,h.registerBlockType)(v,{edit:function(e){const{attributes:t,setAttributes:s}=e,n={post_id:(0,a.jsx)(i.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,help:(0,p._x)("Enter the Post ID of the review to display.","admin-text","site-reviews"),label:(0,p._x)("Review Post ID","admin-text","site-reviews"),onChange:e=>s({post_id:e}),placeholder:(0,p._x)("Enter a Review Post ID","admin-text","site-reviews"),value:t.post_id},"post_id"),hide:(0,a.jsx)(l,{endpoint:"/site-reviews/v1/shortcode/site_review?option=hide",label:(0,p._x)("Hide Options","admin-text","site-reviews"),onChange:e=>s({hide:e}),value:t.hide},"hide")},o={id:(0,a.jsx)(i.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,help:(0,p._x)("This should be a unique value.","admin-text","site-reviews"),label:(0,p._x)("Custom ID","admin-text","site-reviews"),onChange:e=>s({id:e}),value:t.id},"id")};return(0,a.jsx)(w,{inspectorControls:n,inspectorAdvancedControls:o,name:"review",props:e})},icon:(0,a.jsx)(m,{width:24,height:24})})}();