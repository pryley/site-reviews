!function(){"use strict";var e,t={n:function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,{a:s}),s},d:function(e,s){for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},s=window.wp.apiFetch,n=t.n(s),i=window.wp.i18n,r=window.wp.components,o=window.wp.element,a=window.ReactJSXRuntime,l=({endpoint:e,onChange:t,placeholder:s,value:l,...c})=>{const[d,p]=(0,o.useState)(!1),[u,w]=(0,o.useState)([]),h=(0,o.useRef)(!0),v=Object.fromEntries(Object.entries(c).filter((([e])=>!["onChange","placeholder","value"].includes(e)))),g=async(t="")=>{p(!0);try{const s=new URL(e,window.location.origin);s.searchParams.set("include",l.join(",")),s.searchParams.set("search",t);const i=await n()({path:s.pathname+s.search});if(h.current){if(!Array.isArray(i)||0===i.length)throw new Error("Invalid or empty response from API");w(i)}}catch(e){console.error("Error fetching options:",e)}finally{h.current&&p(!1)}};return(0,o.useEffect)((()=>(g(),()=>{h.current=!1})),[]),(0,a.jsx)(r.BaseControl,{__nextHasNoMarginBottom:!0,children:(0,a.jsx)(r.FormTokenField,{__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:e=>{const s=e.map((e=>{const t=u.find((t=>t.title===e));return t?t.id:null})).filter((e=>null!==e));t(s)},onInputChange:g,placeholder:d?(0,i._x)("Loading...","admin-text","site-reviews"):s||(0,i._x)("Select...","admin-text","site-reviews"),suggestions:u.map((e=>e.title)),value:l.map((e=>{const t=u.find((t=>t.id===e));return t?t.title:""})).filter((e=>""!==e)),...v})})},c=window.wp.data,d=({endpoint:e,onChange:t,value:s=[],...i})=>{const[l,d]=(0,o.useState)(!1),{baseControlProps:p,controlProps:u}=(0,r.useBaseControlProps)(i),{setOptions:w}=(0,c.useDispatch)("site-reviews"),h=(0,c.useSelect)((t=>t("site-reviews").getOptions(e)),[e]),v=Object.fromEntries(Object.entries(u).filter((([e])=>!["label","checked","onChange","value"].includes(e))));return(0,o.useEffect)((()=>{h||(async()=>{d(!0);try{const t=new URL(e,window.location.origin),s=await n()({path:t.pathname+t.search});if(!Array.isArray(s)||0===s.length)throw new Error("Invalid or empty response from API");const i=s.map((e=>({label:e.title,value:e.id})));w(e,i)}catch(e){console.error("Error fetching options:",e)}finally{d(!1)}})()}),[e,h,w]),(0,a.jsxs)(r.BaseControl,{__nextHasNoMarginBottom:!0,...p,children:[l&&(0,a.jsx)(r.Spinner,{}),!l&&h&&h.map((e=>(0,a.jsx)(r.ToggleControl,{__nextHasNoMarginBottom:!0,label:e.label,checked:s.includes(e.value),onChange:n=>((e,n)=>{const i=n?[...s,e]:s.filter((t=>t!==e));t(i)})(e.value,n),...v},e.value)))]})},p=window.wp.serverSideRender,u=t.n(p),w=window.wp.blockEditor,h=({className:e="ssr",inspectorAdvancedControls:t={},inspectorControls:s={},name:n,namespace:l="site-reviews",props:c,renderCallback:d})=>{const{attributes:p}=c,h=(0,o.useRef)(null),v=(0,o.useCallback)((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)if("DIV"===t.tagName&&t.classList.contains(e)){if("function"==typeof d){const e=t.firstElementChild;e.classList.add("glsr-"+window.getComputedStyle(e,null).getPropertyValue("direction")),d(t,h.current)}return}}),[d]);(0,o.useEffect)((()=>{if(!h.current)return;const e=new MutationObserver(v);return e.observe(h.current,{childList:!0,subtree:!0}),()=>e.disconnect()}),[v]);const g={panel_settings:(0,a.jsx)(r.PanelBody,{title:(0,i._x)("Settings","admin-text","site-reviews"),children:Object.values(wp.hooks.applyFilters(`${l}.${n}.InspectorControls`,s,c))})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.InspectorControls,{children:Object.values(wp.hooks.applyFilters(`${l}.${n}.InspectorPanels`,g,c))}),(0,a.jsx)(w.InspectorAdvancedControls,{children:Object.values(wp.hooks.applyFilters(`${l}.${n}.InspectorAdvancedControls`,t,c))}),(0,a.jsx)("div",{...(0,w.useBlockProps)({ref:h}),children:(0,a.jsx)(r.Disabled,{isDisabled:!0,children:(0,a.jsx)(u(),{attributes:p,block:`${l}/${n}`,className:e,skipBlockSupportAttributes:!0})})})]})},v=JSON.parse('{"UU":"site-reviews/form"}'),g=window.wp.blocks,m=window.React;function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},_.apply(null,arguments)}const x=t=>m.createElement("svg",_({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),e||(e=m.createElement("path",{d:"M9.506 19.714H3.351c-.43 0-.779.288-.779.643v1.286c0 .355.349.643.779.643h6.156c.43 0 .779-.288.779-.643v-1.286c0-.355-.349-.643-.779-.643zm11.187-7.286H3.306a.73.73 0 0 0-.735.723v4.339a.73.73 0 0 0 .735.723h17.388a.73.73 0 0 0 .735-.723v-4.339a.73.73 0 0 0-.735-.723zm0-3H3.306c-.406 0-.735.349-.735.78v-.06c0 .431.329.78.735.78h17.388c.406 0 .735-.349.735-.78v.06c0-.431-.329-.78-.735-.78zM5.831 1.714a.16.16 0 0 1 .151.103l.79 1.892 1.889.151 1.891-.151.787-1.892a.16.16 0 0 1 .14-.103h.107a.16.16 0 0 1 .151.103l.79 1.892 1.89.151 1.89-.151.787-1.892a.16.16 0 0 1 .14-.103h.107a.16.16 0 0 1 .151.103l.79 1.892 2.052.164a.16.16 0 0 1 .141.112l.026.08a.16.16 0 0 1-.048.173l-1.548 1.33.475 1.994a.16.16 0 0 1-.061.17l-.093.051a.16.16 0 0 1-.18 0L17.3 6.724l-1.756 1.069a.16.16 0 0 1-.18 0l-.071-.048a.16.16 0 0 1-.061-.17l.462-2.007-1.273-1.093-1.271 1.093.475 1.994a.16.16 0 0 1-.061.17l-.093.051a.16.16 0 0 1-.18 0l-1.747-1.06-1.756 1.069a.16.16 0 0 1-.18 0l-.071-.048a.16.16 0 0 1-.061-.17l.462-2.007-1.273-1.093-1.271 1.093.475 1.994a.16.16 0 0 1-.061.17l-.093.051a.16.16 0 0 1-.18 0L5.79 6.724l-1.757 1.07a.16.16 0 0 1-.18 0l-.071-.048a.16.16 0 0 1-.061-.17l.462-2.007-1.548-1.33a.16.16 0 0 1-.058-.173l.026-.08a.16.16 0 0 1 .141-.112l2.052-.164.787-1.892a.16.16 0 0 1 .14-.103h.107z"}))),f={cachedOptions:{}},b={setOptions(e,t){return{type:"SET_OPTIONS",endpoint:e,options:t}}},C={getOptions(e,t){return e.cachedOptions[t]||null}};(0,c.select)("site-reviews")||(0,c.registerStore)("site-reviews",{actions:b,reducer:(e=f,t)=>"SET_OPTIONS"===t.type?{...e,cachedOptions:{...e.cachedOptions,[t.endpoint]:t.options}}:e,selectors:C}),(0,g.registerBlockType)(v.UU,{edit:function(e){const{attributes:t,setAttributes:s}=e,n={assigned_posts:(0,a.jsx)(l,{endpoint:"/site-reviews/v1/shortcode/site_reviews_form?option=assigned_posts",label:(0,i._x)("Assign Reviews to Pages","admin-text","site-reviews"),onChange:e=>s({assigned_posts:e}),placeholder:(0,i._x)("Select a Page...","admin-text","site-reviews"),value:t.assigned_posts},"assigned_posts"),assigned_terms:(0,a.jsx)(l,{endpoint:"/site-reviews/v1/shortcode/site_reviews_form?option=assigned_terms",label:(0,i._x)("Assign Reviews to Categories","admin-text","site-reviews"),onChange:e=>s({assigned_terms:e}),placeholder:(0,i._x)("Select a Category...","admin-text","site-reviews"),value:t.assigned_terms},"assigned_terms"),assigned_users:(0,a.jsx)(l,{endpoint:"/site-reviews/v1/shortcode/site_reviews_form?option=assigned_users",label:(0,i._x)("Assign Reviews to Users","admin-text","site-reviews"),onChange:e=>s({assigned_users:e}),placeholder:(0,i._x)("Select a User...","admin-text","site-reviews"),value:t.assigned_users},"assigned_users"),hide:(0,a.jsx)(d,{endpoint:"/site-reviews/v1/shortcode/site_reviews_form?option=hide",label:(0,i._x)("Hide Options","admin-text","site-reviews"),onChange:e=>s({hide:e}),value:t.hide},"hide")},o={reviews_id:(0,a.jsx)(r.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,help:(0,i._x)("Enter the Custom ID of a reviews block, shortcode, or widget where the review should be displayed after submission.","admin-text","site-reviews"),label:(0,i._x)("Reviews ID","admin-text","site-reviews"),onChange:e=>s({reviews_id:e}),value:t.reviews_id},"reviews_id"),id:(0,a.jsx)(r.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,help:(0,i._x)("This should be a unique value.","admin-text","site-reviews"),label:(0,i._x)("Custom ID","admin-text","site-reviews"),onChange:e=>s({id:e}),value:t.id},"id")};return(0,a.jsx)(h,{inspectorControls:n,inspectorAdvancedControls:o,name:"form",props:e,renderCallback:()=>{var e;null!==(e=GLSR)&&void 0!==e&&e.stars&&(GLSR.stars.destroy(),GLSR.stars.init(".glsr-field-rating select",{clearable:!0}))}})},icon:(0,a.jsx)(x,{width:24,height:24})})}();