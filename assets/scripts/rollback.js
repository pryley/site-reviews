jQuery((function(e){var r=wp.i18n.__,a=document.querySelector("#rollback-plugin"),n=e(a).find("button"),o=n.find("span"),t=function(e){var r;GLSR.notices.error(null!==(r=e.error)&&void 0!==r?r:GLSR.text.rollback_error),n.removeClass("is-busy").prop("disabled",0),console.error(e)},s=function(e){var a,n;_.isObject(e)&&!_.isFunction(e.always)?n=e.errorMessage:_.isString(e)&&"-1"===e?n=r("An error has occurred. Please reload the page and try again."):_.isString(e)?n=e:void 0!==e.readyState&&0===e.readyState?n=r("Connection lost or the server is busy. Please try again later."):_.isString(e.responseText)&&""!==e.responseText?n=e.responseText:_.isString(e.statusText)&&(n=e.statusText),n=n.replace(/<[\/a-z][^<>]*>/gi,""),GLSR.notices.error((null!==(a=e.error)&&void 0!==a?a:GLSR.text.rollback_error)+": "+n)},i=function(e){wp.ajax.send({data:e.data,error:s,success:function(){return window.location=e.url}}).always((function(e){n.removeClass("is-busy").prop("disabled",0),void 0!==e.debug&&_.map(e.debug,(function(e){return console.info(e)}))}))};e(a).on("submit",(function(e){e.preventDefault();var r={_ajax_request:!0,action:GLSR.action},s={_action:a.action.value,_nonce:a._wpnonce.value,version:a.version.value};r[GLSR.nameprefix]=s,o.attr("data-loading",o.data("loading").replace("%s","v"+s.version)),n.addClass("is-busy").prop("disabled",1),wp.ajax.send({data:r,error:t,success:i})}))}));
